from dash import html, Input, Output, Dash
import base64
app = Dash(__name__)




# Encode the local sound file.
sound_filename = 'audio_file.wav'  # replace with your own .mp3 file
#encoded_sound = base64.b64encode(open(sound_filename, 'rb').read())
import wave

input_sound = open(sound_filename, 'rb').read()
sound=bytes([2, 0, 2, 0, 2, 0, 2, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 0, 2, 0, 3, 0, 3, 0, 3, 0, 1, 0, 1, 0, 1, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 254, 255, 254, 255, 254, 255, 254, 255, 254, 255, 255, 255, 255, 255, 255, 255, 1, 0, 2, 0, 2, 0, 2, 0, 2, 0, 2, 0, 2, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 9, 0, 12, 0, 8, 0, 14, 0, 17, 0, 14, 0, 9, 0, 8, 0, 7, 0, 12, 0, 15, 0, 8, 0, 3, 0, 0, 0, 0, 0, 253, 255, 3, 0, 4, 0, 254, 255, 251, 255, 251, 255, 251, 255, 245, 255, 246, 255, 244, 255, 243, 255, 241, 255, 242, 255, 243, 255, 241, 255, 242, 255, 241, 255, 242, 255, 243, 255, 244, 255, 245, 255, 245, 255, 246, 255, 249, 255, 251, 255, 252, 255, 252, 255, 253, 255, 253, 255, 233, 255, 231, 255, 248, 255, 254, 255, 232, 255, 221, 255, 237, 255, 244, 255, 244, 255, 243, 255, 249, 255, 250, 255, 249, 255, 252, 255, 253, 255, 0, 0, 238, 255, 215, 255, 225, 255, 243, 255, 248, 255, 246, 255, 248, 255, 253, 255, 253, 255, 2, 0, 5, 0, 239, 255, 245, 255, 12, 0, 20, 0, 243, 255, 245, 255, 21, 0, 23, 0, 15, 0, 8, 0, 14, 0, 249, 255, 252, 255, 233, 255, 232, 255, 7, 0, 18, 0, 18, 0, 16, 0, 33, 0, 37, 0, 32, 0, 33, 0, 35, 0, 42, 0, 32, 0, 12, 0, 13, 0, 28, 0, 26, 0, 17, 0, 21, 0, 31, 0, 29, 0, 25, 0, 25, 0, 0, 0, 252, 255, 7, 0, 10, 0, 9, 0, 19, 0, 21, 0, 18, 0, 16, 0, 14, 0, 13, 0, 9, 0, 6, 0, 5, 0, 51, 0, 41, 0, 3, 0, 8, 0, 21, 0, 0, 0, 234, 255, 35, 0, 43, 0, 1, 0, 248, 255, 10, 0, 253, 255, 224, 255, 181, 255, 204, 255, 240, 255, 231, 255, 221, 255, 247, 255, 11, 0, 245, 255, 234, 255, 199, 255, 212, 255, 237, 255, 230, 255, 226, 255, 249, 255, 16, 0, 0, 0, 3, 0, 31, 0, 18, 0, 252, 255, 67, 0, 62, 0, 3, 0, 3, 0, 37, 0, 4, 0, 220, 255, 240, 255, 245, 255, 239, 255, 221, 255, 210, 255, 227, 255, 52, 0, 43, 0, 252, 255, 7, 0, 14, 0, 242, 255, 205, 255, 200, 255, 223, 255, 236, 255, 237, 255, 175, 255, 199, 255, 246, 255, 236, 255, 251, 255, 31, 0, 39, 0, 15, 0, 91, 0, 66, 0, 13, 0, 6, 0, 0, 0, 228, 255, 212, 255, 89, 0, 75, 0, 27, 0, 10, 0, 246, 255, 233, 255, 209, 255, 225, 255, 221, 255, 242, 255, 0, 0, 250, 255, 243, 255, 240, 255, 245, 255, 238, 255, 222, 255, 221, 255, 89, 0, 84, 0, 37, 0, 25, 0, 9, 0, 225, 255, 212, 255, 239, 255, 224, 255, 245, 255, 11, 0, 106, 0, 82, 0, 194, 0, 149, 0, 27, 0, 206, 255, 117, 255, 142, 255, 141, 255, 189, 255, 227, 255, 131, 0, 216, 0, 52, 0, 17, 0, 213, 255, 130, 255, 103, 255, 129, 255, 186, 255, 236, 255, 36, 0, 11, 0, 253, 255, 244, 255, 209, 255, 199, 255, 205, 255, 227, 255, 243, 255, 133, 255, 178, 255, 26, 0, 163, 0, 96, 0, 44, 0, 33, 0, 212, 255, 202, 255, 174, 255, 203, 255, 239, 255, 22, 0, 72, 0, 48, 0, 43, 0, 12, 0, 16, 0, 215, 255, 206, 255, 231, 255, 84, 255, 245, 255, 26, 0, 128, 255, 64, 0, 119, 0, 88, 0, 66, 0, 30, 0, 228, 255, 225, 255, 86, 255, 156, 255, 43, 0, 51, 0, 92, 0, 76, 0, 56, 0, 15, 0, 88, 255, 179, 255, 247, 255, 39, 0, 66, 0, 34, 0, 76, 0, 72, 0, 58, 0, 227, 255, 243, 255, 1, 0, 238, 255, 19, 0, 1, 0, 24, 0, 116, 0, 43, 0, 232, 255, 2, 0, 220, 255, 205, 255, 5, 0, 4, 0, 21, 0, 35, 0, 32, 0, 75, 0, 36, 0, 106, 0, 19, 0, 164, 255, 215, 254, 89, 255, 38, 0, 25, 0, 129, 0, 139, 0, 215, 0, 159, 0, 181, 255, 140, 255, 143, 255, 130, 255, 167, 255, 248, 255, 68, 255, 9, 0, 127, 0, 16, 0, 82, 1, 135, 0, 195, 255, 212, 255, 99, 254, 252, 254, 192, 255, 177, 255, 140, 0, 148, 1, 104, 1, 33, 0, 210, 255, 79, 255, 223, 254, 110, 255, 194, 255, 72, 0, 175, 0, 168, 0, 102, 0, 12, 0, 199, 255, 163, 255, 206, 255, 58, 1, 139, 0, 86, 255, 68, 255, 149, 255, 54, 255, 248, 254, 127, 0, 14, 1, 191, 0, 156, 0, 8, 0, 44, 254, 139, 254, 200, 253, 59, 255, 45, 3, 31, 2, 52, 1, 37, 1, 151, 255, 74, 254, 66, 254, 91, 255, 48, 0, 219, 0, 215, 0, 138, 0, 68, 0, 133, 255, 109, 255, 233, 255, 225, 1, 231, 0, 194, 255, 227, 255, 162, 254, 106, 254, 76, 255, 60, 0, 149, 2, 138, 1, 45, 0, 209, 1, 90, 255, 161, 253, 168, 254, 31, 255, 155, 255, 87, 0, 129, 0, 12, 2, 10, 1, 16, 255, 167, 255, 139, 255, 212, 254, 97, 255, 198, 255, 3, 0, 102, 254, 32, 254, 215, 0, 57, 1, 23, 1, 158, 1, 30, 1, 199, 255, 138, 254, 190, 254, 129, 255, 4, 0, 109, 0, 181, 0, 146, 0, 238, 255, 129, 255, 118, 0, 2, 255, 121, 255, 66, 0, 12, 0, 42, 2, 36, 0, 178, 255, 58, 0, 6, 255, 52, 255, 201, 255, 192, 255, 208, 255, 120, 255, 91, 255, 146, 1, 89, 1, 82, 0, 188, 0, 245, 255, 62, 255, 227, 254, 149, 255, 21, 0, 84, 0, 93, 0, 42, 0, 56, 0, 211, 255, 57, 0, 61, 0, 29, 0, 211, 0, 70, 0, 150, 255, 157, 255, 131, 255, 120, 255, 66, 1, 222, 0, 79, 0, 111, 0, 214, 253, 67, 254, 139, 255, 197, 255, 156, 0, 91, 1, 46, 1, 124, 255, 221, 254, 218, 0, 84, 0, 172, 255, 249, 254, 180, 255, 1, 0, 60, 255, 24, 0, 206, 0, 216, 0, 65, 0, 25, 0, 16, 0, 172, 255, 161, 255, 203, 255, 0, 254, 221, 254, 157, 0, 224, 255, 35, 0, 59, 1, 115, 1, 189, 0, 38, 0, 251, 255, 185, 255, 162, 255, 170, 255, 222, 255, 253, 255, 240, 255, 148, 255, 187, 255, 148, 2, 239, 1, 240, 255, 80, 0, 10, 0, 136, 254, 38, 254, 143, 255, 22, 2, 198, 3, 229, 1, 12, 0, 142, 255, 255, 253, 178, 252, 163, 253, 205, 255, 182, 0, 216, 3, 238, 1, 222, 254, 43, 255, 239, 253, 218, 251, 116, 252, 102, 255, 105, 0, 176, 0, 193, 1, 231, 1, 24, 1, 22, 0, 225, 255, 218, 255, 228, 255, 80, 0, 98, 0, 43, 0, 242, 255, 59, 255, 159, 255, 62, 1, 35, 4, 54, 4, 132, 2, 140, 1, 224, 2, 89, 1, 152, 254, 53, 0, 102, 1, 169, 255, 35, 254, 44, 254, 197, 253, 170, 252, 235, 252, 224, 252, 76, 250, 45, 250, 80, 246, 73, 242, 135, 242, 1, 240, 240, 239, 242, 242, 162, 247, 4, 1, 141, 7, 233, 15, 204, 20, 89, 20, 12, 19, 113, 15, 231, 12, 221, 9, 36, 8, 216, 7, 213, 6, 83, 7, 171, 8, 10, 9, 105, 6, 86, 2, 166, 1, 138, 1, 10, 255, 205, 254, 212, 0, 35, 1, 20, 255, 4, 253, 186, 251, 169, 249, 192, 247, 238, 246, 218, 244, 112, 244, 139, 245, 220, 246, 16, 248, 109, 249, 107, 248, 141, 247, 207, 245, 254, 239, 216, 237, 20, 234, 177, 229, 97, 232, 152, 238, 240, 249, 174, 6, 159, 22, 222, 32, 33, 29, 244, 22, 122, 17, 159, 11, 229, 5, 96, 4, 187, 7, 194, 9, 144, 10, 186, 12, 211, 14, 200, 12, 172, 6, 32, 3, 9, 4, 120, 3, 233, 1, 52, 4, 237, 6, 72, 5, 4, 1, 156, 253, 130, 253, 56, 252, 107, 249, 110, 248, 32, 247, 174, 244, 3, 243, 159, 243, 9, 245, 180, 246, 202, 246, 216, 245, 69, 246, 102, 241, 155, 236, 9, 233, 212, 226, 165, 226, 207, 232, 35, 244, 72, 3, 62, 24, 172, 41, 138, 40, 158, 29, 39, 20, 167, 10, 7, 0, 129, 250, 117, 0, 146, 8, 167, 11, 145, 11, 18, 13, 117, 12, 244, 4, 30, 253, 126, 253, 130, 1, 229, 1, 183, 5, 38, 12, 179, 13, 21, 8, 222, 3, 129, 2, 116, 254, 85, 249, 202, 245, 246, 243, 246, 242, 244, 242, 245, 241, 156, 242, 209, 243, 42, 242, 80, 242, 48, 240, 21, 236, 57, 234, 151, 228, 20, 226, 239, 231, 251, 242, 178, 1, 138, 23, 232, 46, 85, 51, 101, 35, 240, 18, 23, 7, 244, 250, 164, 241, 22, 247, 228, 5, 198, 14, 227, 13, 137, 12, 45, 13, 222, 6, 140, 251, 45, 245, 243, 250, 163, 2, 3, 5, 58, 11, 87, 20, 195, 20, 236, 10, 205, 3, 194, 1, 44, 253, 179, 246, 254, 242, 244, 242, 69, 244, 189, 243, 212, 240, 239, 241, 58, 243, 74, 241, 84, 241, 74, 239, 254, 236, 67, 235, 229, 228, 162, 227, 238, 231, 249, 240, 14, 1, 22, 30, 73, 53, 22, 50, 160, 32, 245, 18, 234, 6, 166, 247, 5, 239, 104, 248, 212, 8, 142, 13, 86, 13, 76, 16, 71, 13, 71, 0, 211, 246, 104, 248, 10, 253, 157, 254, 17, 6, 35, 19, 198, 22, 37, 16, 131, 10, 94, 6, 62, 255, 235, 245, 218, 241, 158, 243, 67, 247, 9, 246, 223, 242, 183, 244, 66, 243, 201, 239, 191, 237, 90, 233, 49, 233, 42, 230, 66, 224, 143, 226, 86, 232, 26, 243, 155, 10, 236, 46, 251, 62, 34, 48, 142, 29, 71, 17, 200, 2, 118, 241, 148, 234, 63, 249, 178, 10, 111, 13, 138, 12, 52, 16, 201, 13, 91, 0, 249, 245, 138, 246, 34, 251, 169, 252, 212, 3, 118, 18, 141, 25, 179, 21, 120, 15, 15, 9, 120, 0, 132, 245, 185, 239, 103, 241, 106, 246, 156, 245, 96, 242, 63, 244, 133, 243, 149, 241, 59, 238, 174, 231, 48, 232, 85, 228, 219, 221, 221, 224, 236, 231, 97, 245, 146, 17, 246, 54, 40, 65, 220, 43, 174, 23, 212, 9, 168, 251, 27, 236, 246, 231, 230, 252, 203, 15, 145, 16, 25, 15, 187, 16, 77, 11, 67, 253, 53, 241, 85, 241, 22, 247, 43, 252, 51, 8, 44, 23, 136, 28, 165, 24, 204, 16, 221, 6, 86, 251, 50, 241, 147, 237, 229, 240, 23, 246, 216, 244, 151, 243, 28, 246, 97, 245, 92, 242, 76, 235, 76, 229, 93, 231, 174, 226, 4, 223, 251, 229, 84, 240, 185, 25, 87, 66, 0, 59, 27, 32, 126, 15, 110, 4, 142, 246, 252, 228, 54, 233, 153, 6, 186, 21, 116, 18, 185, 17, 21, 18, 98, 9, 21, 249, 11, 237, 177, 238, 115, 245, 202, 254, 188, 15, 164, 28, 210, 29, 136, 24, 161, 14, 9, 1, 162, 248, 209, 243, 116, 241, 26, 244, 109, 245, 245, 241, 48, 242, 121, 238, 165, 234, 57, 234, 193, 228, 226, 223, 233, 224, 142, 222, 151, 239, 49, 38, 157, 74, 88, 54, 198, 23, 82, 10, 63, 3, 84, 244, 132, 225, 87, 236, 3, 12, 4, 23, 144, 16, 162, 12, 202, 14, 205, 9, 42, 249, 10, 236, 169, 237, 129, 247, 167, 0, 140, 11, 23, 19, 68, 21, 226, 19, 101, 9, 212, 252, 210, 250, 123, 250, 218, 247, 42, 247, 11, 240, 37, 236, 162, 238, 1, 234, 167, 232, 53, 235, 218, 232, 76, 230, 193, 228, 181, 234, 201, 24, 102, 71, 98, 58, 207, 20, 82, 3, 180, 2, 43, 253, 122, 232, 121, 231, 239, 6, 122, 28, 125, 23, 248, 9, 70, 7, 70, 10, 185, 0, 224, 242, 31, 238, 6, 247, 29, 3, 28, 11, 98, 13, 91, 12, 201, 14, 77, 10, 79, 253, 76, 249, 125, 251, 20, 251, 174, 250, 35, 243, 38, 235, 76, 237, 180, 234, 45, 231, 5, 233, 251, 230, 164, 228, 73, 224, 232, 225, 123, 18, 3, 70, 161, 59, 180, 24, 18, 6, 63, 6, 229, 2, 47, 236, 162, 232, 154, 4, 152, 31, 221, 31, 66, 14, 179, 5, 62, 6, 54, 0, 150, 244, 200, 236, 3, 244, 210, 2, 225, 12, 97, 12, 10, 8, 168, 10, 50, 8, 211, 253, 8, 250, 113, 250, 124, 251, 29, 253, 129, 245, 195, 237, 75, 239, 206, 229, 231, 224, 144, 229, 26, 231, 155, 232, 199, 228, 42, 6, 134, 61, 38, 70, 61, 44, 72, 15, 67, 2, 124, 254, 62, 236, 208, 229, 9, 248, 244, 18, 76, 30, 151, 18, 96, 6, 5, 1, 84, 253, 203, 246, 255, 237, 35, 240, 165, 253, 126, 11, 31, 13, 47, 7, 119, 7, 9, 5, 148, 254, 49, 252, 227, 248, 165, 248, 13, 252, 56, 244, 22, 238, 168, 238, 52, 225, 57, 223, 150, 229, 7, 232, 164, 234, 57, 231, 12, 15, 78, 54, 56, 53, 121, 30, 211, 5, 44, 0, 131, 246, 193, 233, 56, 241, 173, 9, 133, 31, 131, 32, 197, 17, 151, 4, 97, 1, 80, 254, 113, 244, 119, 239, 11, 250, 23, 13, 35, 19, 93, 13, 48, 9, 25, 4, 93, 2, 200, 252, 249, 241, 103, 242, 246, 248, 122, 244, 67, 242, 249, 235, 142, 221, 129, 226, 152, 230, 146, 232, 176, 227, 254, 234, 211, 41, 245, 73, 236, 58, 202, 24, 175, 245, 165, 242, 161, 247, 63, 250, 139, 0, 151, 7, 75, 25, 175, 27, 78, 13, 66, 1, 180, 246, 141, 246, 194, 251, 176, 251, 46, 255, 56, 5, 26, 13, 40, 12, 179, 3, 227, 253, 133, 246, 119, 245, 30, 249, 40, 241, 196, 239, 22, 240, 109, 226, 149, 227, 125, 230, 120, 233, 212, 226, 199, 223, 187, 24, 37, 72, 93, 66, 239, 36, 72, 252, 227, 244, 116, 253])
msg_rec = bytearray(sound)
with wave.open("new2.wav", "wb") as f:
    # 2 Channels.
    f.setnchannels(1)
    # 2 bytes per sample.
    f.setsampwidth(2)
    f.setframerate(8000)
    f.writeframes(msg_rec)

encoded_sound = base64.b64encode(sound)

app.layout = html.Div(children=[
    html.H1(children='Demo for Audio with Dash'),

    html.Div(children='''
        Click the button to play your local .mp3 sounds.
    '''),


    html.Button(id="button1", children="Click me for sound"),
    html.Audio(id='audio-player', src='data:audio/mpeg;base64,{}'.format(encoded_sound.decode()),
                          controls=True,
                          autoPlay=False,
                          ),
    html.Div(id="placeholder", style={"display": "none"})])

app.clientside_callback(
    """
    function(n) {
      var audio = document.querySelector('#audio-player');
      if (!audio){
        return -1;
      }
      audio.play();
      return '';
   }
    """, Output('placeholder', 'children'), [Input('button1', 'n_clicks')],
    prevent_initial_call=True
)


if __name__ == '__main__':
    app.run_server(debug=True)